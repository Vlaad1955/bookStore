# üìö –û–Ω–ª–∞–π–Ω-–∫–Ω–∏–≥–∞—Ä–Ω—è ‚Äî API –Ω–∞ NestJS

–¶–µ –±–µ–∫–µ–Ω–¥ –¥–ª—è –æ–Ω–ª–∞–π–Ω-–∫–Ω–∏–≥–∞—Ä–Ω—ñ, —Å—Ç–≤–æ—Ä–µ–Ω–∏–π –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é [NestJS](https://nestjs.com/).

# üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–æ—î–∫—Ç—É

## –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
npm install

## –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞ —É —Ä–µ–∂–∏–º—ñ —Ä–æ–∑—Ä–æ–±–∫–∏
npm run start:dev

## üì¶ –û—Å–Ω–æ–≤–Ω—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ

@nestjs/common, @nestjs/core, @nestjs/swagger

typeorm ‚Äî –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ –ë–î

bcrypt ‚Äî –¥–ª—è —Ö–µ—à—É–≤–∞–Ω–Ω—è –ø–∞—Ä–æ–ª—ñ–≤

passport, jwt ‚Äî –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó

supabase ‚Äî –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –∑–æ–±—Ä–∞–∂–µ–Ω—å

redis ‚Äî –¥–ª—è –∫–µ—Ä—É–≤–∞–Ω–Ω—è —Å–µ—Å—ñ—è–º–∏ —Ç–æ–∫–µ–Ω—ñ–≤

Swagger - API-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

# üîêAuth

–†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –ø–æ–≤–Ω–∏–π —Ü–∏–∫–ª –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞, –≤–∫–ª—é—á–∞—é—á–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∞–≤–∞—Ç–∞—Ä—ñ–≤, —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—é, –ª–æ–≥—ñ–Ω, –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–æ–∫–µ–Ω—ñ–≤, –≤–∏—Ö—ñ–¥ —ñ–∑ —Å–∏—Å—Ç–µ–º–∏.

–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è
–î–ª—è –∑–∞—Ö–∏—â–µ–Ω–∏—Ö –º–∞—Ä—à—Ä—É—Ç—ñ–≤ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è @UseGuards(AuthGuard()) —ñ–∑ JWT.

>mail-–Ω–æ—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó
–ü—ñ—Å–ª—è —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î—Ç—å—Å—è –≤—ñ—Ç–∞–ª—å–Ω–∏–π email –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é EmailService.

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è
–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è
POST /auth/registration

multipart/form-data

–¢—ñ–ª–æ: email, password, firstName, lastName, age, phone, image (—Ñ–∞–π–ª) (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)

üì• –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–µ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è —É Supabase. –Ø–∫—â–æ –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω–æ ‚Äî –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –∞–≤–∞—Ç–∞—Ä –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º.


### –õ–æ–≥—ñ–Ω
POST /auth/login

–¢—ñ–ª–æ: email, password

üì§ –í—ñ–¥–ø–æ–≤—ñ–¥—å:

json
{
  "accessToken": "jwt-token",
  "refreshToken": "refresh-token"
}

### –í–∏—Ö—ñ–¥
POST /auth/logout
üîê Requires Bearer Token

### –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–æ–∫–µ–Ω—ñ–≤
POST /auth/refresh

üì§ –í—ñ–¥–ø–æ–≤—ñ–¥—å:
json
{
  "refreshToken": "..."
}

# üõí Basket

–§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª –¥–æ–∑–≤–æ–ª—è—î –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–∏–º –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º –¥–æ–¥–∞–≤–∞—Ç–∏ –∫–Ω–∏–≥–∏ –¥–æ –∫–æ—à–∏–∫–∞, –≤–∏–¥–∞–ª—è—Ç–∏ –æ–∫—Ä–µ–º—ñ –∫–Ω–∏–≥–∏, –æ—á–∏—â–∞—Ç–∏ –≤–µ—Å—å –∫–æ—à–∏–∫ —ñ –ø–µ—Ä–µ–≥–ª—è–¥–∞—Ç–∏ –≤–º—ñ—Å—Ç.

> –£—Å—ñ –º–∞—Ä—à—Ä—É—Ç–∏ –≤–∏–º–∞–≥–∞—é—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó (JWT Bearer Token).

### –û—Ç—Ä–∏–º–∞—Ç–∏ –ø–æ—Ç–æ—á–Ω–∏–π –∫–æ—à–∏–∫

ET /basket/find

Headers:
Authorization: Bearer <accessToken>

üì§ –í—ñ–¥–ø–æ–≤—ñ–¥—å: –û–±'—î–∫—Ç –∫–æ—à–∏–∫–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞:

json
{
"id": "basket-id",
"user": { ... },
"items": [
{
"id": "item-id",
"book": {
"id": "book-id",
"title": "–ù–∞–∑–≤–∞ –∫–Ω–∏–≥–∏",
...
},
"quantity": 2
},
...
]
}

### –î–æ–¥–∞—Ç–∏ –∫–Ω–∏–≥—É –¥–æ –∫–æ—à–∏–∫–∞

POST /basket/add

Headers:
Authorization: Bearer <accessToken>

–¢—ñ–ª–æ:
json
  {
    "bookId": "string",
    "quantity": 2 // –æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ, –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º 1
  }
üì§ –í—ñ–¥–ø–æ–≤—ñ–¥—å: –û–Ω–æ–≤–ª–µ–Ω–∏–π –æ–±'—î–∫—Ç –∫–æ—à–∏–∫–∞

### –í–∏–¥–∞–ª–∏—Ç–∏ –æ–¥–Ω—É –∫–Ω–∏–≥—É –∑ –∫–æ—à–∏–∫–∞

DELETE /basket/remove/:id

:id ‚Äî bookId

Headers:
Authorization: Bearer <accessToken>

üì§ –í—ñ–¥–ø–æ–≤—ñ–¥—å: –û–Ω–æ–≤–ª–µ–Ω–∏–π –æ–±'—î–∫—Ç –∫–æ—à–∏–∫–∞

### –û—á–∏—Å—Ç–∏—Ç–∏ –≤–µ—Å—å –∫–æ—à–∏–∫

DELETE /basket/clear

Headers:
Authorization: Bearer <accessToken>

üì§ –í—ñ–¥–ø–æ–≤—ñ–¥—å: –û–Ω–æ–≤–ª–µ–Ω–∏–π (–ø–æ—Ä–æ–∂–Ω—ñ–π) –æ–±'—î–∫—Ç –∫–æ—à–∏–∫–∞

### üìò –ü—Ä–∏–º—ñ—Ç–∫–∏

>–Ø–∫—â–æ –∫–Ω–∏–≥–∞ –≤–∂–µ —î –≤ –∫–æ—à–∏–∫—É ‚Äî —ó—ó –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∑–±—ñ–ª—å—à—É—î—Ç—å—Å—è.

>–Ø–∫—â–æ –ø–µ—Ä–µ–¥–∞—Ç–∏ –≤—ñ–¥'—î–º–Ω—É –∫—ñ–ª—å–∫—ñ—Å—Ç—å, –≤–æ–Ω–∞ –±—É–¥–µ –ø—Ä–∏–≤–µ–¥–µ–Ω–∞ –¥–æ 0.

>–Ø–∫—â–æ –∫–æ—à–∏–∫–∞ –≤ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ —â–µ –Ω–µ–º–∞—î ‚Äî –≤—ñ–Ω —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ.

# üìö Books

–ú–æ–¥—É–ª—å –¥–ª—è –∫–µ—Ä—É–≤–∞–Ω–Ω—è –∫–Ω–∏–≥–∞–º–∏: —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è, –æ–Ω–æ–≤–ª–µ–Ω–Ω—è, –ø—É–±–ª—ñ–∫–∞—Ü—ñ—è, –æ—Ç—Ä–∏–º–∞–Ω–Ω—è, —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è —Ç–∞ –≤–∏–¥–∞–ª–µ–Ω–Ω—è.

### –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–Ω–∏–≥–∏

POST /books/create-book

Headers:
Authorization: Bearer <accessToken>

–ü–æ–ª–µ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è: image

–¢—ñ–ª–æ:
title: string;
price: number;
description?: string;
author?: string;
gift: boolean;
cover: 'soft' | 'firm';
categories: string[];

### –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–Ω–∏–≥–∏

PATCH /books/update/:id

Headers:
Authorization: Bearer <accessToken>

–¢—ñ–ª–æ: (–≤—Å—ñ –ø–æ–ª—è –æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ) title?: string;
price?: number;
description?: string;
author?: string;
image?: string;
gift?: boolean;
cover?: 'soft' | 'firm';
categories?: string[];

### –ó–º—ñ–Ω–∞ —Å—Ç–∞—Ç—É—Å—É –ø—É–±–ª—ñ–∫–∞—Ü—ñ—ó

PUT /books/published/:id

Headers:
Authorization: Bearer <accessToken>

### –û—Ç—Ä–∏–º–∞–Ω–Ω—è —Å–ø–∏—Å–∫—É –∫–Ω–∏–≥

GET /books/list

### –û—Ç—Ä–∏–º–∞–Ω–Ω—è –æ–¥–Ω—ñ—î—ó –∫–Ω–∏–≥–∏

GET /books/find/:id

### –í–∏–¥–∞–ª–µ–Ω–Ω—è –∫–Ω–∏–≥–∏

DELETE /books/delete/:id

Headers:
Authorization: Bearer <accessToken>
